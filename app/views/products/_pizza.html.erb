<script>
  $(document).ready(function(){
    // Limita marcar 4 sabores
    //
    $(".flavor input[type='checkbox']").bind("change", function() {
      var count = $(".flavor input[type='checkbox']:checked").length;
      if(count > 4) { $(this).prop('checked', false); }
    });

    // Marca "especial" para pizzas especiais
    // 
    $(".special input[type='checkbox']").bind("change", function() {
      var count = $(".special input[type='checkbox']:checked").length;

      if(count >= 1){
        $(".special-check").prop('checked', true);
        $(".special-label").addClass("ui-btn-active");
      } else {
        $(".special-check").prop('checked', false);
        $(".special-label").removeClass("ui-btn-active");
      }
    });
  });
</script>

<%= form_tag :add_pizza_orders, remote: true, class: "pizza-form" do %>
  <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
    <%= label_tag "radio-choice-1", "P" %>
    <%= radio_button_tag 'size', 'P', true, id: "radio-choice-1" %>

    <%= label_tag "radio-choice-2", "M" %>
    <%= radio_button_tag 'size', 'M', false, id: "radio-choice-2" %>

    <%= label_tag "radio-choice-3", "G" %>
    <%= radio_button_tag 'size', 'G', false, id: "radio-choice-3" %>

    <%= label_tag "radio-choice-4", "Especial", class: "special-label" %>
    <%= check_box_tag 'special', 'true', false, id: "radio-choice-4", class: "special-check" %>

    <%= label_tag "radio-choice-5", "Borda" %>
    <%= check_box_tag 'border', 'true', false, id: "radio-choice-5" %>
  </fieldset>

  <div><%= text_field_tag :observation, "", placeholder: "Observação" %></div>

  <fieldset data-role="controlgroup" data-mini="true">
    <% flavors.each_with_index do |f, index| %>
      <span class="<%= special?(f.special) %> <%= swet?(f.swet) %> flavor">
        <%= check_box_tag "checkbox-#{index}", f.name.capitalize, false, name: "flavors[]" %>
        <%= label_tag "checkbox-#{index}", f.name %>
      </span>
    <% end %>
  </fieldset>

  <br /><br />

  <div class="btn-fixed-bottom">
    <%= submit_tag "Adicionar", class: "show-page-loading-msg" %>
  </div>
<% end %>
